{"version":3,"sources":["../../../../src/basic/Tabs/index.js"],"names":["React","require","Component","ReactNative","Dimensions","View","Animated","ScrollView","StyleSheet","InteractionManager","Platform","ViewPropTypes","TimerMixin","SceneComponent","DefaultTabBar","ScrollableTabBar","ScrollableTabView","mixins","statics","propTypes","tabBarPosition","oneOf","initialPage","number","page","onChangeTab","func","onScroll","renderTabBar","any","style","contentProps","object","scrollWithoutAnimation","bool","locked","prerenderingSiblingsNumber","getDefaultProps","getInitialState","currentPage","props","scrollValue","Value","containerWidth","get","width","sceneKeys","newSceneKeys","componentDidMount","scrollFn","scrollView","OS","x","state","scrollTo","animated","setTimeout","runAfterInteractions","componentWillReceiveProps","children","updateSceneKeys","goToPage","pageNumber","offset","y","callback","_onChangeTab","bind","cloneElement","newKeys","previousKeys","setState","_children","forEach","child","idx","key","_makeSceneKey","_keyExists","_shouldRenderSceneKey","push","currentPageKey","numOfSibling","find","sceneKey","heading","renderScrollableContent","scenes","_composeScenes","offsetX","e","nativeEvent","contentOffset","_updateScrollValue","_onMomentumScrollBeginAndEnd","map","Math","round","_updateSelectedPage","nextPage","localNextPage","position","prevPage","i","ref","from","value","setValue","_handleLayout","layout","requestAnimationFrame","Children","render","overlayTabs","tabBarProps","tabs","tabStyle","activeTabStyle","textStyle","activeTextStyle","tabHeaderStyle","undefined","activeTab","tabBarBackgroundColor","backgroundColor","tabBarActiveTextColor","activeTextColor","tabBarInactiveTextColor","inactiveTextColor","tabBarTextStyle","tabBarUnderlineStyle","underlineStyle","left","right","styles","container","module","exports","create","flex","scrollableContentAndroid"],"mappings":"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","file":"index.js","sourcesContent":["const React = require(\"react\");\nconst { Component } = React;\nimport PropTypes from \"prop-types\";\nimport createReactClass from \"create-react-class\";\nconst ReactNative = require(\"react-native\");\nconst { Dimensions, View, Animated, ScrollView, StyleSheet, InteractionManager, Platform, ViewPropTypes } = ReactNative;\nconst TimerMixin = require(\"react-timer-mixin\");\nimport _ from \"lodash\";\n\nconst SceneComponent = require(\"./SceneComponent\");\nconst { DefaultTabBar } = require(\"./DefaultTabBar\");\nconst { ScrollableTabBar } = require(\"./ScrollableTabBar\");\n\nconst ScrollableTabView = createReactClass({\n\tmixins: [TimerMixin],\n\tstatics: {\n\t\tDefaultTabBar,\n\t\tScrollableTabBar,\n\t},\n\n\tpropTypes: {\n\t\ttabBarPosition: PropTypes.oneOf([\"top\", \"bottom\", \"overlayTop\", \"overlayBottom\"]),\n\t\tinitialPage: PropTypes.number,\n\t\tpage: PropTypes.number,\n\t\tonChangeTab: PropTypes.func,\n\t\tonScroll: PropTypes.func,\n\t\trenderTabBar: PropTypes.any,\n\t\tstyle: ViewPropTypes.style,\n\t\tcontentProps: PropTypes.object,\n\t\tscrollWithoutAnimation: PropTypes.bool,\n\t\tlocked: PropTypes.bool,\n\t\tprerenderingSiblingsNumber: PropTypes.number,\n\t},\n\n\tgetDefaultProps() {\n\t\treturn {\n\t\t\ttabBarPosition: \"top\",\n\t\t\tinitialPage: 0,\n\t\t\tpage: -1,\n\t\t\tonChangeTab: () => {},\n\t\t\tonScroll: () => {},\n\t\t\tcontentProps: {},\n\t\t\tscrollWithoutAnimation: false,\n\t\t\tlocked: false,\n\t\t\tprerenderingSiblingsNumber: 0,\n\t\t};\n\t},\n\n\tgetInitialState() {\n\t\treturn {\n\t\t\tcurrentPage: this.props.initialPage,\n\t\t\tscrollValue: new Animated.Value(this.props.initialPage),\n\t\t\tcontainerWidth: Dimensions.get(\"window\").width,\n\t\t\tsceneKeys: this.newSceneKeys({ currentPage: this.props.initialPage }),\n\t\t};\n\t},\n\n\tcomponentDidMount() {\n\t\tconst scrollFn = () => {\n\t\t\tif (this.scrollView && Platform.OS === \"android\") {\n\t\t\t\tconst x = this.props.initialPage * this.state.containerWidth;\n\t\t\t\tthis.scrollView.scrollTo({ x, animated: false });\n\t\t\t}\n\t\t};\n\t\tthis.setTimeout(() => {\n\t\t\tInteractionManager.runAfterInteractions(scrollFn);\n\t\t}, 0);\n\t},\n\n\tcomponentWillReceiveProps(props) {\n\t\tif (props.children !== this.props.children) {\n\t\t\tthis.updateSceneKeys({\n\t\t\t\tpage: this.state.currentPage,\n\t\t\t\tchildren: props.children,\n\t\t\t});\n\t\t}\n\n\t\tif (props.page >= 0 && props.page !== this.state.currentPage) {\n\t\t\tthis.goToPage(props.page);\n\t\t}\n\t},\n\n\tgoToPage(pageNumber) {\n\t\tconst offset = pageNumber * this.state.containerWidth;\n\t\tif (this.scrollView) {\n\t\t\tthis.scrollView.scrollTo({\n\t\t\t\tx: offset,\n\t\t\t\ty: 0,\n\t\t\t\tanimated: !this.props.scrollWithoutAnimation,\n\t\t\t});\n\t\t}\n\n\t\tconst currentPage = this.state.currentPage;\n\t\tthis.updateSceneKeys({\n\t\t\tpage: pageNumber,\n\t\t\tcallback: this._onChangeTab.bind(this, currentPage, pageNumber),\n\t\t});\n\t},\n\n\trenderTabBar(props) {\n\t\tif (this.props.renderTabBar === false) {\n\t\t\treturn null;\n\t\t} else if (this.props.renderTabBar) {\n\t\t\treturn React.cloneElement(this.props.renderTabBar(props), props);\n\t\t} else {\n\t\t\treturn <DefaultTabBar {...props} />;\n\t\t}\n\t},\n\n\tupdateSceneKeys({ page, children = this.props.children, callback = () => {} }) {\n\t\tlet newKeys = this.newSceneKeys({\n\t\t\tpreviousKeys: this.state.sceneKeys,\n\t\t\tcurrentPage: page,\n\t\t\tchildren,\n\t\t});\n\t\tthis.setState({ currentPage: page, sceneKeys: newKeys }, callback);\n\t},\n\n\tnewSceneKeys({ previousKeys = [], currentPage = 0, children = this.props.children }) {\n\t\tlet newKeys = [];\n\t\tthis._children(children).forEach((child, idx) => {\n\t\t\tlet key = this._makeSceneKey(child, idx);\n\t\t\tif (this._keyExists(previousKeys, key) || this._shouldRenderSceneKey(idx, currentPage)) {\n\t\t\t\tnewKeys.push(key);\n\t\t\t}\n\t\t});\n\t\treturn newKeys;\n\t},\n\n\t_shouldRenderSceneKey(idx, currentPageKey) {\n\t\tlet numOfSibling = this.props.prerenderingSiblingsNumber;\n\t\treturn idx < currentPageKey + numOfSibling + 1 && idx > currentPageKey - numOfSibling - 1;\n\t},\n\n\t_keyExists(sceneKeys, key) {\n\t\treturn sceneKeys.find(sceneKey => key === sceneKey);\n\t},\n\n\t_makeSceneKey(child, idx) {\n\t\treturn child.props.heading + \"_\" + idx;\n\t},\n\n\trenderScrollableContent() {\n\t\tconst scenes = this._composeScenes();\n\t\treturn (\n\t\t\t<ScrollView\n\t\t\t\thorizontal\n\t\t\t\tpagingEnabled\n\t\t\t\tautomaticallyAdjustContentInsets={false}\n\t\t\t\tcontentOffset={{\n\t\t\t\t\tx: this.props.initialPage * this.state.containerWidth,\n\t\t\t\t}}\n\t\t\t\tref={scrollView => {\n\t\t\t\t\tthis.scrollView = scrollView;\n\t\t\t\t}}\n\t\t\t\tonScroll={e => {\n\t\t\t\t\tconst offsetX = e.nativeEvent.contentOffset.x;\n\t\t\t\t\tthis._updateScrollValue(offsetX / this.state.containerWidth);\n\t\t\t\t}}\n\t\t\t\tonMomentumScrollBegin={this._onMomentumScrollBeginAndEnd}\n\t\t\t\tonMomentumScrollEnd={this._onMomentumScrollBeginAndEnd}\n\t\t\t\tscrollEventThrottle={16}\n\t\t\t\tscrollsToTop={false}\n\t\t\t\tshowsHorizontalScrollIndicator={false}\n\t\t\t\tscrollEnabled={!this.props.locked}\n\t\t\t\tdirectionalLockEnabled\n\t\t\t\talwaysBounceVertical={false}\n\t\t\t\tkeyboardDismissMode=\"on-drag\"\n\t\t\t\t{...this.props.contentProps}\n\t\t\t>\n\t\t\t\t{scenes}\n\t\t\t</ScrollView>\n\t\t);\n\t},\n\n\t_composeScenes() {\n\t\treturn this._children().map((child, idx) => {\n\t\t\tlet key = this._makeSceneKey(child, idx);\n\t\t\treturn (\n\t\t\t\t<SceneComponent\n\t\t\t\t\tkey={child.key}\n\t\t\t\t\tshouldUpdated={this._shouldRenderSceneKey(idx, this.state.currentPage)}\n\t\t\t\t\tstyle={{ width: this.state.containerWidth }}\n\t\t\t\t>\n\t\t\t\t\t{this._keyExists(this.state.sceneKeys, key) ? child : <View heading={child.props.heading} />}\n\t\t\t\t</SceneComponent>\n\t\t\t);\n\t\t});\n\t},\n\n\t_onMomentumScrollBeginAndEnd(e) {\n\t\tconst offsetX = e.nativeEvent.contentOffset.x;\n\t\tconst page = Math.round(offsetX / this.state.containerWidth);\n\t\tif (this.state.currentPage !== page) {\n\t\t\tthis._updateSelectedPage(page);\n\t\t}\n\t},\n\n\t_updateSelectedPage(nextPage) {\n\t\tlet localNextPage = nextPage;\n\t\tif (typeof localNextPage === \"object\") {\n\t\t\tlocalNextPage = nextPage.nativeEvent.position;\n\t\t}\n\n\t\tconst currentPage = this.state.currentPage;\n\t\tthis.updateSceneKeys({\n\t\t\tpage: localNextPage,\n\t\t\tcallback: this._onChangeTab.bind(this, currentPage, localNextPage),\n\t\t});\n\t},\n\n\t_onChangeTab(prevPage, currentPage) {\n\t\tthis.props.onChangeTab({\n\t\t\ti: currentPage,\n\t\t\tref: this._children()[currentPage],\n\t\t\tfrom: prevPage,\n\t\t});\n\t},\n\n\t_updateScrollValue(value) {\n\t\tthis.state.scrollValue.setValue(value);\n\t\tthis.props.onScroll(value);\n\t},\n\n\t_handleLayout(e) {\n\t\tconst { width } = e.nativeEvent.layout;\n\n\t\tif (Math.round(width) !== Math.round(this.state.containerWidth)) {\n\t\t\tthis.setState({ containerWidth: width });\n\t\t\tthis.requestAnimationFrame(() => {\n\t\t\t\tthis.goToPage(this.state.currentPage);\n\t\t\t});\n\t\t}\n\t},\n\n\t_children(children = this.props.children) {\n\t\treturn React.Children.map(children, child => child);\n\t},\n\n\trender() {\n\t\tlet overlayTabs = this.props.tabBarPosition === \"overlayTop\" || this.props.tabBarPosition === \"overlayBottom\";\n\t\tlet tabBarProps = {\n\t\t\tgoToPage: this.goToPage,\n\t\t\ttabs: this._children().map(child => child.props.heading),\n\t\t\ttabStyle: this._children().map(child => child.props.tabStyle),\n\t\t\tactiveTabStyle: this._children().map(child => child.props.activeTabStyle),\n\t\t\ttextStyle: this._children().map(child => child.props.textStyle),\n\t\t\tactiveTextStyle: this._children().map(child => child.props.activeTextStyle),\n\t\t\ttabHeaderStyle: this._children().map(child => _.get(child.props.heading.props, \"style\", undefined)),\n\t\t\tactiveTab: this.state.currentPage,\n\t\t\tscrollValue: this.state.scrollValue,\n\t\t\tcontainerWidth: this.state.containerWidth,\n\t\t};\n\n\t\tif (this.props.tabBarBackgroundColor) {\n\t\t\ttabBarProps.backgroundColor = this.props.tabBarBackgroundColor;\n\t\t}\n\t\tif (this.props.tabBarActiveTextColor) {\n\t\t\ttabBarProps.activeTextColor = this.props.tabBarActiveTextColor;\n\t\t}\n\t\tif (this.props.tabBarInactiveTextColor) {\n\t\t\ttabBarProps.inactiveTextColor = this.props.tabBarInactiveTextColor;\n\t\t}\n\t\tif (this.props.tabBarTextStyle) {\n\t\t\ttabBarProps.textStyle = this.props.tabBarTextStyle;\n\t\t}\n\t\tif (this.props.tabBarUnderlineStyle) {\n\t\t\ttabBarProps.underlineStyle = this.props.tabBarUnderlineStyle;\n\t\t}\n\t\tif (overlayTabs) {\n\t\t\ttabBarProps.style = {\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tleft: 0,\n\t\t\t\tright: 0,\n\t\t\t\t[this.props.tabBarPosition === \"overlayTop\" ? \"top\" : \"bottom\"]: 0,\n\t\t\t};\n\t\t}\n\n\t\treturn (\n\t\t\t<View style={[styles.container, this.props.style]} onLayout={this._handleLayout}>\n\t\t\t\t{this.props.tabBarPosition === \"top\" && this.renderTabBar(tabBarProps)}\n\t\t\t\t{this.renderScrollableContent()}\n\t\t\t\t{(this.props.tabBarPosition === \"bottom\" || overlayTabs) && this.renderTabBar(tabBarProps)}\n\t\t\t</View>\n\t\t);\n\t},\n});\n\nmodule.exports = ScrollableTabView;\n\nconst styles = StyleSheet.create({\n\tcontainer: {\n\t\tflex: 1,\n\t},\n\tscrollableContentAndroid: {\n\t\tflex: 1,\n\t},\n});\n"]}